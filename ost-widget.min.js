!function(){"use strict";let e=null,t=null,n=null,o=null,i=!1;function d(){return window.innerWidth<=768}function l(){let e=window.pageYOffset||document.documentElement.scrollTop,t=document.documentElement.scrollHeight-document.documentElement.clientHeight;return t>0?e/t*100:0}function s(e){return e.toString().padStart(2,"0")}function c(){return"countdownTimer_endDate"}function u(e){"undefined"!=typeof Storage&&(localStorage.setItem(c(),e.toISOString()),window.countdownConfig.debugMode&&console.log("Timer end date saved to localStorage:",e.toISOString()))}function r(){if("undefined"!=typeof Storage){let e=localStorage.getItem(c());if(e){let t=new Date(e);return window.countdownConfig.debugMode&&console.log("Timer end date loaded from localStorage:",t.toISOString()),t}}return null}function g(){"undefined"!=typeof Storage&&(localStorage.removeItem(c()),window.countdownConfig.debugMode&&console.log("Timer storage cleared"))}function a(e){let t=new Date,n=864e5*(e.days||0)+36e5*(e.hours||0)+6e4*(e.minutes||0)+1e3*(e.seconds||0);return new Date(t.getTime()+n)}function f(){let e=0,t=document.querySelectorAll("header, .header, .navbar, .nav");return t.forEach(t=>{let n=window.getComputedStyle(t);("fixed"===n.position||"sticky"===n.position)&&(e=Math.max(e,t.offsetHeight))}),e}function w(){let e=document.getElementById("stickyCountdown");if(!e)return;let t=d();e.classList.remove("position-top","position-bottom"),e.classList.remove("align-left","align-center","align-right");let n=t?window.countdownConfig.position.mobile:window.countdownConfig.position.desktop,o=t?window.countdownConfig.alignment.mobile:window.countdownConfig.alignment.desktop;e.classList.add(`position-${n}`),e.classList.add(`align-${o}`),window.countdownConfig.debugMode&&console.log(`Applied ${t?"mobile":"desktop"} positioning: ${n}-${o}`)}function m(){let e=document.body,t=document.getElementById("stickyCountdown"),n=d(),o=n?window.countdownConfig.position.mobile:window.countdownConfig.position.desktop;if(e.classList.remove("sticky-countdown-top-active","sticky-countdown-bottom-active"),n&&t){let i=t.offsetHeight,l=i+10;"bottom"===o?(e.style.paddingBottom=l+"px",e.style.paddingTop=""):(e.style.paddingTop=l+"px",e.style.paddingBottom=""),window.countdownConfig.debugMode&&console.log(`Applied dynamic mobile padding: ${l}px`)}else if(!n){let s="bottom"===o?"sticky-countdown-bottom-active":"sticky-countdown-top-active";e.classList.add(s),e.style.paddingTop="",e.style.paddingBottom="",window.countdownConfig.debugMode&&console.log(`Applied desktop padding class: ${s}`)}}function C(){if(!window.countdownConfig.dynamicText.enabled||!window.countdownConfig.dynamicText.textChanges.length)return;let e=document.getElementById("countdownBtn"),t=e.querySelector(".btn-text");if(!t)return;let n=d(),o=l(),i=window.countdownConfig.dynamicText.defaultText;for(let s=0;s<window.countdownConfig.dynamicText.textChanges.length;s++){let c=window.countdownConfig.dynamicText.textChanges[s],u=!1;if("percentage"===c.triggerType){let r=n?"object"==typeof c.trigger?c.trigger.mobile:c.trigger:"object"==typeof c.trigger?c.trigger.desktop:c.trigger;u=o>=r,window.countdownConfig.debugMode&&u&&console.log(`Percentage trigger ${s+1} activated at ${o.toFixed(1)}%`)}else if("element"===c.triggerType){let g=document.getElementById(c.trigger);if(g){let a=g.getBoundingClientRect(),f=c.offset||0;u=a.top<=f,window.countdownConfig.debugMode&&u&&console.log(`Element trigger ${s+1} activated for element #${c.trigger}`)}else window.countdownConfig.debugMode&&console.warn(`Element with id "${c.trigger}" not found`)}u&&(i=c.text)}t.textContent!==i&&(t.textContent=i,window.countdownConfig.debugMode&&console.log(`Button text updated to: "${i}"`))}function y(e,t){let n=86400*e.days+3600*e.hours+60*e.minutes+e.seconds,o=86400*t.days+3600*t.hours+60*t.minutes+t.seconds;return n<=o}function $(e){let t=document.getElementById("order_form");if(t){if(e){t.classList.add("form-disabled");let n=t.querySelectorAll("input, select, textarea, button");n.forEach(e=>{e.disabled=!0,e.setAttribute("data-was-disabled","true")})}else{t.classList.remove("form-disabled");let o=t.querySelectorAll("input, select, textarea, button");o.forEach(e=>{"true"===e.getAttribute("data-was-disabled")&&(e.disabled=!1,e.removeAttribute("data-was-disabled"))})}}}function p(e){let t=document.getElementById("form");if(t){switch($(!1),t.classList.remove("hidden"),e){case"hide":t.classList.add("hidden");break;case"disable":$(!0);break;default:t.classList.remove("hidden"),$(!1)}window.countdownConfig.debugMode&&console.log(`Form state changed to: ${e}`)}}function b(){let o=function t(){if(!e)return{days:0,hours:0,minutes:0,seconds:0,expired:!0};let n=new Date().getTime(),o=e.getTime(),i=o-n;if(i<=0)return{days:0,hours:0,minutes:0,seconds:0,expired:!0};let d=Math.ceil(i/1e3),l=Math.floor(d/86400);d-=86400*l;let s=Math.floor(d/3600);d-=3600*s;let c=Math.floor(d/60);d-=60*c;let u=d;return{days:l,hours:s,minutes:c,seconds:u,totalSeconds:86400*l+3600*s+60*c+u,expired:!1}}();document.getElementById("days").textContent=s(o.days),document.getElementById("hours").textContent=s(o.hours),document.getElementById("minutes").textContent=s(o.minutes),document.getElementById("seconds").textContent=s(o.seconds);let d=document.getElementById("stickyCountdown");if(o.expired)!function o(){let d=document.getElementById("stickyCountdown"),l=document.getElementById("countdownBtn"),s=document.getElementById("countdownTitle");if(d.classList.add("expired"),d.classList.remove("warning","urgency-pulse"),s&&window.countdownConfig.expiredTitle&&(s.textContent=window.countdownConfig.expiredTitle),v(),g(),function e(){if("undefined"!=typeof Storage){let t=new Date;localStorage.setItem(x(),t.toISOString()),n=t,window.countdownConfig.debugMode&&console.log("Last shown date saved:",t.toISOString())}}(),l.classList.add("hidden"),setTimeout(()=>{m()},50),p(window.countdownConfig.formBehaviorOnExpired),window.countdownConfig.frequency>0){let c=864e5*window.countdownConfig.frequency;setTimeout(()=>{B()&&function n(){if(!t){window.countdownConfig.debugMode&&console.log("Cannot restart: no original duration stored");return}let o=document.getElementById("stickyCountdown"),d=document.getElementById("countdownBtn"),l=document.getElementById("countdownTitle");u(e=a(t)),i=!1,o.classList.remove("expired"),l&&(l.textContent=window.countdownConfig.title,l.style.display=window.countdownConfig.showTitle?"block":"none"),d&&d.classList.remove("hidden"),window.countdownConfig.debugMode&&console.log("Fresh timer restarted")}()},c),window.countdownConfig.debugMode&&console.log(`Timer will restart in ${window.countdownConfig.frequency} days if page remains open`)}}();else{d.classList.remove("expired");let l=document.getElementById("countdownBtn");l&&l.classList.remove("hidden"),window.countdownConfig.urgencyState.enabled&&y(o,window.countdownConfig.urgencyState.threshold)?(d.classList.add("urgency","urgency-pulse"),d.classList.remove("warning"),window.countdownConfig.debugMode&&console.log("Urgency state activated")):window.countdownConfig.warningState.enabled&&y(o,window.countdownConfig.warningState.threshold)?(d.classList.add("warning"),d.classList.remove("urgency","urgency-pulse"),window.countdownConfig.debugMode&&console.log("Warning state activated")):d.classList.remove("warning","urgency","urgency-pulse")}}function v(){o&&(clearInterval(o),o=null),i=!1,window.countdownConfig.debugMode&&console.log("Countdown timer stopped")}function h(){v(),t&&(u(e=a(t)),window.countdownConfig.debugMode&&console.log("Countdown timer reset"))}function x(){return"countdownTimer_lastShown"}function B(){if(0===window.countdownConfig.frequency)return!0;let e=function e(){if("undefined"!=typeof Storage){let t=localStorage.getItem(x());if(t)return n=new Date(t),window.countdownConfig.debugMode&&console.log("Last shown date loaded:",n.toISOString()),n}return null}();if(!e)return!0;let t=new Date,o=(t-e)/864e5,i=o>=window.countdownConfig.frequency;return window.countdownConfig.debugMode&&console.log("Frequency check:",{lastShown:e.toISOString(),daysSinceLastShown:o.toFixed(2),frequencyDays:window.countdownConfig.frequency,shouldShow:i}),i}function E(){let n=document.getElementById("stickyCountdown");!(!n||n.classList.contains("visible"))&&(n.classList.remove("entrance","exit"),n.classList.add("entrance"),n.classList.add("visible"),m(),!e&&(t={days:window.countdownConfig.duration.days||0,hours:window.countdownConfig.duration.hours||0,minutes:window.countdownConfig.duration.minutes||0,seconds:window.countdownConfig.duration.seconds||0},function t(){let n=r();return n&&n>new Date?(e=n,window.countdownConfig.debugMode&&console.log("Continuing existing timer - ends at:",e.toISOString())):(n&&g(),u(e=a(window.countdownConfig.duration)),window.countdownConfig.debugMode&&console.log("Starting new timer - ends at:",e.toISOString())),e}(),window.countdownConfig.debugMode&&console.log("Persistent timer initialized")),function t(){if(i||!e)return;i=!0,b(),o=setInterval(b,1e3);let n=document.getElementById("countdownTitle");n&&(n.textContent=window.countdownConfig.title,n.style.display=window.countdownConfig.showTitle?"block":"none"),window.countdownConfig.debugMode&&console.log("Countdown timer started")}(),window.countdownConfig.debugMode&&console.log("Countdown shown"))}function I(){let e=document.getElementById("stickyCountdown");e&&(e.classList.add("exit"),e.classList.remove("visible","warning","urgency","urgency-pulse"),v(),setTimeout(()=>{e.classList.remove("exit","entrance")},400),window.countdownConfig.debugMode&&console.log("Countdown hidden"))}function L(e){e.preventDefault();let t=window.countdownConfig.buttonAction;switch(t.type){case"scroll":let n=document.getElementById(t.target);if(!n){console.error(`Target element with id "${t.target}" not found!`);return}let o=n.getBoundingClientRect(),i=o.top+window.pageYOffset,d=f(),l=Math.max(0,i-d-window.countdownConfig.scrollBehavior.offsetTop);window.scrollTo({top:l,behavior:window.countdownConfig.scrollBehavior.behavior}),function e(t,n){let o=Date.now(),i=document.documentElement.scrollHeight,d=0,l=()=>{let e=document.documentElement.scrollHeight,s=Date.now();if(e!==i?(i=e,d=0,window.countdownConfig.debugMode&&console.log(`Document height changed to ${e}px`)):d++,d>=3||s-o>=3e3){let c=document.getElementById(window.countdownConfig.buttonAction.target);if(c){let u=c.getBoundingClientRect(),r=u.top+window.pageYOffset,g=f(),a=Math.max(0,r-g-window.countdownConfig.scrollBehavior.offsetTop);Math.abs(a-t)>20&&(window.scrollTo({top:a,behavior:window.countdownConfig.scrollBehavior.behavior}),window.countdownConfig.debugMode&&console.log(`Adjusted scroll position: ${a}px`))}n();return}setTimeout(l,100)};l()}(l,()=>{window.countdownConfig.debugMode&&console.log("Scroll completed")}),window.countdownConfig.debugMode&&console.log("Scrolled to target:",t.target);break;case"url":window.open(t.target,"_blank"),window.countdownConfig.debugMode&&console.log("Opened URL:",t.target);break;default:console.error("Unknown button action type:",t.type)}}function T(){if(C(),"scroll"!==window.countdownConfig.showMode)return;let e=d(),t=l(),n=e?window.countdownConfig.scrollTrigger.mobile:window.countdownConfig.scrollTrigger.desktop;t>=n&&E()}function S(){w();let e=document.getElementById("stickyCountdown");e&&e.classList.contains("visible")&&setTimeout(()=>{m()},100),"scroll"===window.countdownConfig.showMode?T():C()}function M(){if(!window.countdownConfig){console.error("countdownConfig not found! Please define window.countdownConfig before loading this script.");return}!function e(){let t=`
            <div class="sticky-countdown" id="stickyCountdown">
                <div class="countdown-content">
                    <div class="countdown-title" id="countdownTitle"></div>
                    <div class="countdown-timer">
                        <div class="time-unit">
                            <div class="time-value" id="days">00</div>
                            <div class="time-label">Hari</div>
                        </div>
                        <div class="time-separator">:</div>
                        <div class="time-unit">
                            <div class="time-value" id="hours">00</div>
                            <div class="time-label">Jam</div>
                        </div>
                        <div class="time-separator">:</div>
                        <div class="time-unit">
                            <div class="time-value" id="minutes">00</div>
                            <div class="time-label">Minit</div>
                        </div>
                        <div class="time-separator">:</div>
                        <div class="time-unit">
                            <div class="time-value" id="seconds">00</div>
                            <div class="time-label">Saat</div>
                        </div>
                    </div>
                    <button class="countdown-button" id="countdownBtn">
                        <span class="btn-text"></span>
                    </button>
                </div>
            </div>
        `;document.body.insertAdjacentHTML("beforeend",t)}(),function e(){let t=document.getElementById("stickyCountdown"),n=document.getElementById("countdownTitle"),o=t.querySelector(".countdown-button"),i=t.querySelector(".btn-text");if(!t){console.error("Countdown element not found!");return}let d=B(),l=!1,s=r();if(s&&s<=new Date&&(g(),l=!0),!d||l?(l=!0,p(window.countdownConfig.formBehaviorOnExpired),function e(){let t=document.getElementById("stickyCountdown"),n=document.getElementById("countdownTitle"),o=document.getElementById("countdownBtn");t&&(t.classList.remove("entrance","exit"),t.classList.add("expired"),t.classList.remove("warning","urgency","urgency-pulse"),t.classList.add("entrance","visible"),n&&window.countdownConfig.expiredTitle&&(n.textContent=window.countdownConfig.expiredTitle,n.style.display=window.countdownConfig.showTitle?"block":"none"),o&&o.classList.add("hidden"),document.getElementById("days").textContent="00",document.getElementById("hours").textContent="00",document.getElementById("minutes").textContent="00",document.getElementById("seconds").textContent="00",w(),setTimeout(()=>{m()},100),window.countdownConfig.debugMode&&console.log("Expired countdown displayed"))}(),window.countdownConfig.debugMode&&console.log("Countdown shown in expired state")):(p("show"),window.countdownConfig.debugMode&&console.log("Frequency period passed, form restored")),n&&(l?n.textContent=window.countdownConfig.expiredTitle:n.textContent=window.countdownConfig.title,n.style.display=window.countdownConfig.showTitle?"block":"none"),i&&(i.textContent=window.countdownConfig.dynamicText.defaultText),o&&o.addEventListener("click",L),w(),!l){let c=s&&s>new Date;if(c)E(),C();else switch(window.countdownConfig.showMode){case"always":E(),C();break;case"scroll":let u=!1;window.addEventListener("scroll",()=>{u||(requestAnimationFrame(()=>{T(),u=!1}),u=!0)}),T();break;case"timed":setTimeout(()=>{E(),C()},1e3*window.countdownConfig.timedDisplay.delay)}if(window.countdownConfig.dynamicText.enabled&&"scroll"!==window.countdownConfig.showMode){let a=!1;window.addEventListener("scroll",()=>{a||(requestAnimationFrame(()=>{C(),a=!1}),a=!0)})}}setTimeout(()=>{!function e(){let t=document.getElementById("stickyCountdown");t&&t.classList.contains("expired")&&(m(),window.countdownConfig.debugMode&&console.log("Applied initial body padding on page load"))}()},100),window.countdownConfig.debugMode&&console.log("Countdown timer initialized",{isExpiredState:l,shouldShow:d,hasSavedTimer:!!s})}();let e;window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(S,150)})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",M):M()}();
